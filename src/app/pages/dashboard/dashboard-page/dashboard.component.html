<div class="content">
  <div *ngIf="loading">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="!successful && !loading">
    <p>Something went wrong!</p>
    <p>({{ errorText }})</p>
  </div>
  <div *ngIf="successful && !loading">
    <h1>Your surveys</h1>
    <mat-accordion>
      <mat-expansion-panel *ngFor="let survey of surveys">
        <mat-expansion-panel-header>
          <mat-panel-title> {{ survey.title }} (ID: {{survey.id}}) </mat-panel-title>
          <mat-panel-description>
            {{ survey.description }}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <button
          mat-raised-button
          color="primary"
          [routerLink]="'/answers'"
          [queryParams]="{ id: survey.id }"
        >
          Show answers
        </button>
        <p *ngFor="let question of survey.questions">{{ question.text }}</p>
      </mat-expansion-panel></mat-accordion
    >
    <button
      class="button"
      mat-raised-button
      color="primary"
      [routerLink]="'/createsurvey'"
    >
      Create new survey
    </button>
  </div>
</div>
